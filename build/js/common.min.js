"use strict";window.onload=function(){setTimeout((function(){$(".js-preloader").css("opacity","0"),setTimeout((function(){$(".js-preloader").remove()}),500)}),3e3),$(".js-accordeon-trigger").on("click",(function(e){var t=$(e.currentTarget);t.closest(".js-accordeon").find(".js-accordeon-trigger").not(t).parent().removeClass("active").find(".js-accordeon-trigger").next().slideUp(300),t.parent().toggleClass("active").find(".js-accordeon-trigger").next().slideToggle(300)})),$(".js-select").each((function(e,t){$(t).select2({placeholder:$(t).attr("data-placeholder"),minimumResultsForSearch:-1})})),$(".bubble__close").on("click",(function(e){e.preventDefault(),$(e.currentTarget).parent().hide(0)})),$(window).innerWidth()<1200&&$(".bubble").each((function(e,t){var r=$(t);r.attr("style","top: ".concat(r.attr("data-top"),"; left: ").concat(r.attr("data-left"),";"))})),$(".js-radio").on("click",(function(){var e=$(this),t=e.find("input").attr("name");$('.radio__input[name="'.concat(t,'"]')).parent().removeClass("radio--checked"),e.addClass("radio--checked")}));var e=0,t=function(t,r){$(t.target).closest(".popup__window").length&&r.hasClass("js-popup")||($("body").css({position:"static",marginTop:"0"}),window.scrollTo(0,e),r.closest(".js-popup").hide(0))},r=function(t){e=window.scrollY,$("body").css({position:"fixed",marginTop:"".concat(-e,"px")}),t.fadeIn(300)};if($("body").on("click",".js-open-popup",(function(e){e.preventDefault();var t=$(this).attr("data-popup"),i=$('.js-popup[data-popup="'.concat(t,'"]'));r(i)})),$(".js-close-popup").on("click",(function(e){t(e,$(this))})),$(".popup__auth-tabs-item").on("click",(function(e){e.preventDefault();var t=$(e.currentTarget),r=t.attr("data-tab");$(".popup__auth-tabs-item--current").removeClass("popup__auth-tabs-item--current"),t.addClass("popup__auth-tabs-item--current"),$(".popup__auth-content--current").removeClass("popup__auth-content--current"),$('.popup__auth-content[data-tab="'.concat(r,'"]')).addClass("popup__auth-content--current")})),$(document).on("click",(function(e){$(e.target).closest(".header-bottom__menu").length||$(e.target).hasClass("header-bottom__nav-link")||$(".header-bottom__menu").slideUp(300)})),$(".js-header-slider").slick({autoplay:!0,autoplaySpeed:7e3,prevArrow:'<div class="header-top__slider-arrow header-top__slider-arrow--prev">→</div>',nextArrow:'<div class="header-top__slider-arrow header-top__slider-arrow--next">→</div>'}),$(".header-bottom__nav-link").on("click",(function(e){e.preventDefault(),$(".header-bottom__menu").hide(0);var t=$('.header-bottom__menu[data-menu="'.concat($(e.currentTarget).attr("data-menu"),'"]'));t.is(":visible")?t.slideUp(300):t.css("display","flex").hide(0).slideDown(300)})),$('.header-middle__info-action[data-icon="burger"]').on("click",(function(e){$(e.currentTarget).toggleClass("header-middle__info-action--active"),$(".header").toggleClass("header--active"),$(".header__menu").slideToggle(500)})),$(".header__menu-map-heading").on("click",(function(e){var t=$(e.currentTarget),r=t.parent();r.hasClass("header__menu-map--active")?t.parent().find(".header__menu-map-link").slideToggle(300):($(".header__menu-map").removeClass("header__menu-map--active"),$(".header__menu-map-link").slideUp(300),t.parent().find(".header__menu-map-link").css("display","block").hide(0).slideToggle(300)),r.toggleClass("header__menu-map--active")})),$(window).innerWidth()<1200){var i=$(".encyclopedia-tabs__grid"),a=i.attr("data-current"),n=$(".encyclopedia-tabs__item").width()*a;0!==a&&i.scrollLeft(n+30)}$(".js-helpful-services-slider").slick({slidesToShow:4,prevArrow:'<div class="slider__arrow slider__arrow--prev"></div>',nextArrow:'<div class="slider__arrow slider__arrow--next"></div>',responsive:[{breakpoint:1199,settings:"unslick"}]}),$(".js-helpful-articles-slider").slick({slidesToShow:3,prevArrow:'<div class="slider__arrow slider__arrow--prev"></div>',nextArrow:'<div class="slider__arrow slider__arrow--next"></div>',responsive:[{breakpoint:1199,settings:{arrows:!1,infinite:!1,slidesToShow:1}}]}),$(".js-reviews-slider").slick({slidesToShow:3,prevArrow:'<div class="reviews__slider-arrow slider__arrow slider__arrow--prev"></div>',nextArrow:'<div class="reviews__slider-arrow slider__arrow slider__arrow--next"></div>',responsive:[{breakpoint:1199,settings:{arrows:!1,infinite:!1,slidesToShow:1}}]}),$(".js-partners-slider").slick({slidesToShow:6,swipeToSlide:!0,prevArrow:'<div class="reviews__partners-arrow slider__arrow slider__arrow--prev"></div>',nextArrow:'<div class="reviews__partners-arrow slider__arrow slider__arrow--next"></div>',pauseOnHover:!1,autoplay:!0,autoplaySpeed:0,cssEase:"linear",speed:1e4,responsive:[{breakpoint:1199,settings:{slidesToShow:3}}]}),$(".js-difficulties").on("afterChange init",(function(e,t){$(".difficulties__slider-arrow.slider__arrow--prev p").text($(t.$slides[t.currentSlide]).find(".difficulties__slide").attr("data-prev")),$(".difficulties__slider-arrow.slider__arrow--next p").text($(t.$slides[t.currentSlide]).find(".difficulties__slide").attr("data-next")),0===t.currentSlide?$(".difficulties__slider-arrow.slider__arrow--prev").hide():t.currentSlide==t.$slides.length-1?$(".difficulties__slider-arrow.slider__arrow--next").hide():($(".difficulties__slider-arrow.slider__arrow--prev").show(),$(".difficulties__slider-arrow.slider__arrow--next").show())})),$(".js-difficulties").slick({infinite:!1,prevArrow:'<div class="difficulties__slider-arrow slider__arrow slider__arrow--prev"><p></p></div>',nextArrow:'<div class="difficulties__slider-arrow slider__arrow slider__arrow--next"><p></p></div>',responsive:[{breakpoint:1199,settings:"unslick"}]}),$(window).innerWidth()<1200&&$(".difficulties__slider").on("scroll",(function(e){var t=$(e.currentTarget);t.addClass("difficulties--scrolled"),t.find(".difficulties__drag").fadeOut(150)})),$(window).innerWidth()<1200&&$(".footer__map-heading").on("click",(function(e){var t=$(e.currentTarget);t.hasClass("footer__map-heading--active")?t.parent().find(".footer__map-link").slideToggle(300):t.parent().find(".footer__map-link").css("display","block").hide(0).slideToggle(300),t.toggleClass("footer__map-heading--active")})),$(".js-specialists-slider").slick({slidesToShow:3,prevArrow:'<div class="slider__arrow slider__arrow--prev"></div>',nextArrow:'<div class="slider__arrow slider__arrow--next"></div>',responsive:[{breakpoint:1199,settings:{arrows:!1,infinite:!1,slidesToShow:1}}]}),$(".consults-steps__card-accordeon").on("click",(function(e){e.preventDefault();var t=$(e.currentTarget),r=t.siblings(".consults-steps__card-content");r.is(":visible")?t.text(t.attr("data-show")):t.text(t.attr("data-hide")),r.slideToggle(300)})),$(".consults-types__card-info-more").on("click",(function(e){e.preventDefault();var t=$(e.currentTarget),r=t.closest(".consults-types__card").find(".consults-types__card-inner");r.is(":visible")?t.text(t.attr("data-show")):t.text(t.attr("data-hide")),t.toggleClass("consults-types__card-info-more--active"),r.slideToggle(300)})),$(".encyclopedia-toggles__item").on("click",(function(e){$(".encyclopedia-toggles__item--active").removeClass("encyclopedia-toggles__item--active"),$(e.currentTarget).addClass("encyclopedia-toggles__item--active")})),$(".encyclopedia-filter__head").on("click",(function(e){$(e.currentTarget).toggleClass("encyclopedia-filter__head--active"),$(".encyclopedia-filter__inner").slideToggle(300)})),$(".encyclopedia-filter__item").on("click",(function(e){$(e.currentTarget).toggleClass("encyclopedia-filter__item--active"),$(".encyclopedia-filter__head-themes-count").text($(".encyclopedia-filter__item--active").length)})),$(".encyclopedia-filter__btn").on("click",(function(){$(".encyclopedia-filter__head").toggleClass("encyclopedia-filter__head--active"),$(".encyclopedia-filter__inner").slideToggle(300)})),$(".encyclopedia-article__image-like").on("click",(function(e){$(e.currentTarget).toggleClass("encyclopedia-article__image-like--active")})),$(".calendar__table-popup-close").on("click",(function(e){$(e.currentTarget).parent().hide(0)})),$('.calendar__table-cell[data-week="hard"]').on("click",(function(e){var t=$(e.currentTarget),r=t.attr("data-popup");$(".calendar__table-popup").hide(0),$(window).innerWidth()>1199?$('.calendar__table-popup[data-popup="'.concat(r,'"]')).fadeIn(300):$('.calendar__table-popup[data-popup="'.concat(r,'"]')).css("top",t.position().top-15+"px").fadeIn(300)})),$(".js-range").each((function(e,t){var r=$(t);r.ionRangeSlider({type:"single",max:r.attr("data-max"),min:r.attr("data-min"),from:r.attr("value"),values:JSON.parse(r.attr("data-value")),grid:!0,grid_num:1,step:1,onFinish:function(e){$(".month-age__result-content").hide(0),$('.month-age__result-content[data-content="'.concat(e.from,'"]')).fadeIn(300),e.from==r.attr("data-min")?$(".month-age__selected").text((e.from_value+" месяцев").replace("<br>"," ")):$(".month-age__selected").text(e.from_value.replace("<br>"," "))}})})),$(".profile__children-add").on("click",(function(e){$('<div class="profile__children-row">\n    <input class="input profile__children-input" type="text" name="childrenBirthdate" placeholder="Дата рождения ребенка"/><a class="button button--quoternary profile__children-btn" href="#">Сон ребенка 0-3 месяца</a>\n  </div>').insertBefore($(e.currentTarget))})),$(".profile__aside-link").on("click",(function(e){var t=$(e.currentTarget),r=t.attr("data-tab");$(window).innerWidth()<1200&&($(".profile__aside").hide(0),$(".profile__main").fadeIn(300),$(".profile__heading-title").addClass("profile__heading-title--back")),$(".profile__aside-link--active").removeClass("profile__aside-link--active"),t.addClass("profile__aside-link--active"),$(".profile__content").hide(0),$('.profile__content[data-content="'.concat(r,'"]')).fadeIn(300)})),$(".profile__heading-title").on("click",(function(e){var t=$(e.currentTarget);$(window).innerWidth()<1200&&(t.removeClass("profile__heading-title--back"),$(".profile__main").hide(0),$(".profile__aside").fadeIn(300))})),$(".js-profile-consult").on("click",(function(){$(".profile__consult-main").hide(0),$(".profile__consult-main--form").fadeIn(300)})),$(".consultant__tabs-item").on("click",(function(e){e.preventDefault();var t=$(e.currentTarget),r=t.attr("data-content");$(".consultant__tabs-item--active").removeClass("consultant__tabs-item--active"),t.addClass("consultant__tabs-item--active"),$(".consultant__content").hide(0),$('.consultant__content[data-content="'.concat(r,'"]')).fadeIn(300)})),$(".js-consultant-certificates").slick({slidesToShow:4,infinite:!1,prevArrow:'<div class="consultant__certificates-arrow slider__arrow slider__arrow--prev"></div>',nextArrow:'<div class="consultant__certificates-arrow slider__arrow slider__arrow--next"></div>',responsive:[{breakpoint:1199,settings:{arrows:!1,slidesToShow:2}}]});var o=$(".js-consultant-slider");o.on("init reInit afterChange",(function(e,t,r){var i=(r||0)+1;$(".consultant__slider-counter").text(i+" / "+t.slideCount)})),o.slick({infinite:!1,loop:!0,prevArrow:'<div class="consultant__slider-arrow slider__arrow slider__arrow--prev"></div>',nextArrow:'<div class="consultant__slider-arrow slider__arrow slider__arrow--next"></div>'}),$(".press__tabs-item").on("click",(function(e){e.preventDefault();var t=$(e.currentTarget),r=t.attr("data-content");$(".press__tabs-item--active").removeClass("press__tabs-item--active"),t.addClass("press__tabs-item--active"),$(".press__content").hide(0),$('.press__content[data-content="'.concat(r,'"]')).fadeIn(300)})),$(window).innerWidth()>1199&&$(".js-child-more").on("click",(function(e){$($(e.currentTarget).parent().find('.js-form-row input[name="date"]')[0]).clone().insertBefore($(e.currentTarget).parent().find("button")).val("")})),$(".js-child-more").on("click",(function(e){$($(e.currentTarget).parent().find('input[name="date"]')[0]).clone().insertBefore($(e.currentTarget)).val("")}))};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJvbmxvYWQiLCJzZXRUaW1lb3V0IiwiY3NzIiwiJCIsInJlbW92ZSIsImN1cnJlbnRUYXJnZXQiLCJlIiwiJHRoaXMiLCJjbG9zZXN0IiwiZmluZCIsIm5vdCIsInBhcmVudCIsInJlbW92ZUNsYXNzIiwibmV4dCIsInNsaWRlVXAiLCJ0b2dnbGVDbGFzcyIsInNsaWRlVG9nZ2xlIiwicGxhY2Vob2xkZXIiLCJlYWNoIiwiaSIsImF0dHIiLCJtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaCIsImVsIiwib24iLCJoaWRlIiwicHJldmVudERlZmF1bHQiLCJjb25jYXQiLCJhZGRDbGFzcyIsInRoaXMiLCJuYW1lIiwiaGlkZU92ZXJmbG93IiwidG9wT2Zmc2V0IiwiY2xvc2VQb3B1cCIsIm9wZW5Qb3B1cCIsImxlbmd0aCIsImhhc0NsYXNzIiwicG9zaXRpb24iLCJtYXJnaW5Ub3AiLCIkcG9wdXAiLCJzY3JvbGxZIiwic2hvd092ZXJmbG93IiwiZmFkZUluIiwidGFyZ2V0Iiwic2xpY2siLCJhdXRvcGxheVNwZWVkIiwicHJldkFycm93IiwiZG9jdW1lbnQiLCIkbWVudSIsImlzIiwic2xpZGVEb3duIiwiaW5uZXJXaWR0aCIsIiRncmlkIiwiJG1hcCIsInNsaWRlc1RvU2hvdyIsIm5leHRBcnJvdyIsInJlc3BvbnNpdmUiLCJicmVha3BvaW50Iiwid2lkdGgiLCJjdXJyZW50Iiwic2V0dGluZ3MiLCJvZmZzZXQiLCJhcnJvd3MiLCJpbmZpbml0ZSIsInN3aXBlVG9TbGlkZSIsImF1dG9wbGF5IiwiY3NzRWFzZSIsInNwZWVkIiwiY3VycmVudFNsaWRlIiwicGF1c2VPbkhvdmVyIiwidGV4dCIsIiRzbGlkZXMiLCJzaG93IiwiZmFkZU91dCIsIiRjb250ZW50Iiwic2libGluZ3MiLCJ0eXBlIiwibWF4IiwiZnJvbSIsInZhbHVlcyIsInBhcnNlIiwiZ3JpZF9udW0iLCJzdGVwIiwidG9wIiwiJHJvdyIsImluc2VydEJlZm9yZSIsImlvblJhbmdlU2xpZGVyIiwibWluIiwiSlNPTiIsIm9uRmluaXNoIiwiZGF0YSIsImZyb21fdmFsdWUiLCJyZXBsYWNlIiwiJGNvbnN1bHRhbnRTbGlkZXIiLCJsb29wIiwiZXZlbnQiLCJzbGlkZUNvdW50IiwiY2xvbmUiLCJ2YWwiXSwibWFwcGluZ3MiOiJhQUFBQSxPQUFPQyxPQUFTLFdBQWhCRCxZQUFPQyxXQUVOQyxFQUFBQSxpQkFBV0MsSUFBTSxVQUFBLEtBR2hCRCxZQUFBQSxXQUNFRSxFQUFBQSxpQkFBQ0MsV0FETyxPQUhELEtBU1RELEVBQUEseUJBQWtCRSxHQUFBQSxTQUFsQixTQUFBQyxHQUVBQyxJQUFBQSxFQUFNQyxFQUFRRixFQUFBRCxlQUVmRSxFQUxDQyxRQUFBLGlCQUFBQyxLQUFBLHlCQUFBQyxJQUFBSCxHQUFBSSxTQUFBQyxZQUFBLFVBQUFILEtBQUEseUJBQUFJLE9BQUFDLFFBQUEsS0FNQVgsRUFBRVEsU0FBRkksWUFBcUIsVUFBQU4sS0FBVyx5QkFBQUksT0FBQUcsWUFBQSxRQUU5QkMsRUFBQUEsY0FBV0MsTUFBRyxTQUFEQyxFQUFNQyxHQUNuQkMsRUFBQUEsR0FBQUEsUUFBQUEsQ0FGWUosWUFBZGQsRUFBQW1CLEdBQUFGLEtBQUEsb0JBREFDLHlCQUFBLE9BUUFsQixFQUFBQSxrQkFBQW9CLEdBQW1CWixTQUFTYSxTQUFBQSxHQUM3QmxCLEVBSENtQixpQkFFQXRCLEVBQUVHLEVBQUVELGVBQWVNLFNBQVNhLEtBQUssTUFLL0JyQixFQUFBSixRQUFNUSxhQUFOLE1BRUFBLEVBQUFBLFdBQU1hLE1BQUssU0FBQUQsRUFBWEcsR0FDRCxJQUpEZixFQUFBSixFQUFBbUIsR0FHRWYsRUFBTWEsS0FBSyxRQUFYLFFBQUFNLE9BQTRCbkIsRUFBTWEsS0FBSyxZQUF2QyxZQUFBTSxPQUE2RG5CLEVBQU1hLEtBQUssYUFBeEUsU0FRRmpCLEVBQUFBLGFBQUNvQixHQUFBLFNBQUEsV0FDRGhCLElBQUFBLEVBQU1vQixFQUFOQyxNQUxBQyxFQUFBdEIs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QUssRUFDOUNoRSxFQUFFLCtCQUErQmtFLEtBQUtsRCxFQUFJLE1BQVF3QixFQUFNb0QsZUFFMURILEVBQWtCakQsTUFBTSxDQUN0Qm1CLFVBQVUsRUFDVitCLE1BQU0sRUFDTmhELFVBQVcsaUZBQ1hTLFVBQVcsbUZBRVhuRCxFQUFFLHFCQUFxQm9CLEdBQUcsU0FBUyxTQUFBakIsR0FDbkNBLEVBQUVtQixpQkFDRixJQUFNbEIsRUFBUUosRUFBRUcsRUFBRUQsZUFDWnFDLEVBQVNuQyxFQUFNYSxLQUFLLGdCQUUxQmpCLEVBQUUsNkJBQTZCUyxZQUFZLDRCQUMzQ0wsRUFBTW9CLFNBQVMsNEJBRWZ4QixFQUFFLG1CQUFtQnFCLEtBQUssR0FDMUJyQixFQUFDLGlDQUFBdUIsT0FBa0NnQixFQUFsQyxPQUE4Q0QsT0FBTyxRQUdsRHRDLEVBQUVKLFFBQVFtRCxhQUFlLE1BRTNCL0MsRUFBRSxrQkFBa0JvQixHQUFHLFNBQVMsU0FBQWpCLEdBQzlCSCxFQUFFQSxFQUFFRyxFQUFFRCxlQUFlTSxTQUFTRixLQUFLLG1DQUFtQyxJQUFJdUYsUUFBUVosYUFBYWpGLEVBQUVHLEVBQUVELGVBQWVNLFNBQVNGLEtBQUssV0FBV3dGLElBQUksT0FHako5RixFQUFFLGtCQUFrQm9CLEdBQUcsU0FBUyxTQUFBakIsR0FDOUJILEVBQUVBLEVBQUVHLEVBQUVELGVBQWVNLFNBQVNGLEtBQUssc0JBQXNCLElBQUl1RixRQUFRWixhQUFhakYsRUFBRUcsRUFBRUQsZ0JBQWdCNEYsSUFBSSIsImZpbGUiOiJjb21tb24ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93Lm9ubG9hZCA9ICgpID0+IHtcblxuXHRzZXRUaW1lb3V0KCgpID0+IHtcbiAgJCgnLmpzLXByZWxvYWRlcicpLmNzcygnb3BhY2l0eScsICcwJyk7XG5cbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgJCgnLmpzLXByZWxvYWRlcicpLnJlbW92ZSgpO1xuICB9LCA1MDApO1xufSwgMzAwMCk7XG5cbiAgJCgnLmpzLWFjY29yZGVvbi10cmlnZ2VyJykub24oJ2NsaWNrJywgZSA9PiB7XG4gIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuXG4gICR0aGlzLmNsb3Nlc3QoJy5qcy1hY2NvcmRlb24nKS5maW5kKCcuanMtYWNjb3JkZW9uLXRyaWdnZXInKS5ub3QoJHRoaXMpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5maW5kKCcuanMtYWNjb3JkZW9uLXRyaWdnZXInKS5uZXh0KCkuc2xpZGVVcCgzMDApO1xuICAkdGhpcy5wYXJlbnQoKS50b2dnbGVDbGFzcygnYWN0aXZlJykuZmluZCgnLmpzLWFjY29yZGVvbi10cmlnZ2VyJykubmV4dCgpLnNsaWRlVG9nZ2xlKDMwMCk7XG59KTtcbiAgJCgnLmpzLXNlbGVjdCcpLmVhY2goKGksIGVsKSA9PiB7XG4gICQoZWwpLnNlbGVjdDIoe1xuICAgIHBsYWNlaG9sZGVyOiAkKGVsKS5hdHRyKCdkYXRhLXBsYWNlaG9sZGVyJyksXG4gICAgbWluaW11bVJlc3VsdHNGb3JTZWFyY2g6IC0xXG4gIH0pO1xufSk7XG4gICQoJy5idWJibGVfX2Nsb3NlJykub24oJ2NsaWNrJywgZSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgJChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudCgpLmhpZGUoMCk7XG59KTtcblxuaWYgKCQod2luZG93KS5pbm5lcldpZHRoKCkgPCAxMjAwKSB7XG4gICQoJy5idWJibGUnKS5lYWNoKChpLCBlbCkgPT4ge1xuICAgIGNvbnN0ICR0aGlzID0gJChlbCk7XG5cbiAgICAkdGhpcy5hdHRyKCdzdHlsZScsIGB0b3A6ICR7JHRoaXMuYXR0cignZGF0YS10b3AnKX07IGxlZnQ6ICR7JHRoaXMuYXR0cignZGF0YS1sZWZ0Jyl9O2ApO1xuICB9KTtcbn1cblxuICAkKCcuanMtcmFkaW8nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0ICR0aGlzID0gJCh0aGlzKTtcbiAgY29uc3QgbmFtZSA9ICR0aGlzLmZpbmQoJ2lucHV0JykuYXR0cignbmFtZScpO1xuXG4gICQoYC5yYWRpb19faW5wdXRbbmFtZT1cIiR7bmFtZX1cIl1gKS5wYXJlbnQoKS5yZW1vdmVDbGFzcygncmFkaW8tLWNoZWNrZWQnKTtcbiAgJHRoaXMuYWRkQ2xhc3MoJ3JhZGlvLS1jaGVja2VkJyk7XG59KTtcbiAgbGV0IHRvcE9mZnNldCA9IDA7XG5cbmNvbnN0IGhpZGVPdmVyZmxvdyA9ICgpID0+IHtcbiAgdG9wT2Zmc2V0ID0gd2luZG93LnNjcm9sbFk7XG5cbiAgJCgnYm9keScpLmNzcyh7XG4gICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgbWFyZ2luVG9wOiBgJHstdG9wT2Zmc2V0fXB4YFxuICB9KTtcbn07XG5cbmNvbnN0IHNob3dPdmVyZmxvdyA9ICgpID0+IHtcbiAgJCgnYm9keScpLmNzcyh7XG4gICAgcG9zaXRpb246ICdzdGF0aWMnLFxuICAgIG1hcmdpblRvcDogJzAnXG4gIH0pO1xuXG4gIHdpbmRvdy5zY3JvbGxUbygwLCB0b3BPZmZzZXQpO1xufTtcblxuY29uc3QgY2xvc2VQb3B1cCA9IChlLCAkdGhpcykgPT4ge1xuICBpZighJChlLnRhcmdldCkuY2xvc2VzdCgnLnBvcHVwX193aW5kb3cnKS5sZW5ndGggfHwgISR0aGlzLmhhc0NsYXNzKCdqcy1wb3B1cCcpKSB7XG4gICAgc2hvd092ZXJmbG93KCk7XG4gIFxuICAgICR0aGlzLmNsb3Nlc3QoJy5qcy1wb3B1cCcpLmhpZGUoMCk7XG5cdH1cbn07XG5cbmNvbnN0IG9wZW5Qb3B1cCA9ICgkcG9wdXApID0+IHtcbiAgaGlkZU92ZXJmbG93KCk7XG4gIFxuICAkcG9wdXAuZmFkZUluKDMwMCk7XG59O1xuXG4kKCdib2R5Jykub24oJ2NsaWNrJywgJy5qcy1vcGVuLXBvcHVwJywgZnVuY3Rpb24gKGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGNvbnN0IHRhcmdldCA9ICQodGhpcykuYXR0cignZGF0YS1wb3B1cCcpO1xuICBjb25zdCAkcG9wdXAgPSAkKGAuanMtcG9wdXBbZGF0YS1wb3B1cD1cIiR7dGFyZ2V0fVwiXWApO1xuICBvcGVuUG9wdXAoJHBvcHVwKTtcbn0pO1xuXG4kKCcuanMtY2xvc2UtcG9wdXAnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICBjbG9zZVBvcHVwKGUsICQodGhpcykpO1xufSk7XG5cbiQoJy5wb3B1cF9fYXV0aC10YWJzLWl0ZW0nKS5vbignY2xpY2snLCBlID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICBjb25zdCB0YXJnZXQgPSAkdGhpcy5hdHRyKCdkYXRhLXRhYicpO1xuXG4gICQoJy5wb3B1cF9fYXV0aC10YWJzLWl0ZW0tLWN1cnJlbnQnKS5yZW1vdmVDbGFzcygncG9wdXBfX2F1dGgtdGFicy1pdGVtLS1jdXJyZW50Jyk7XG4gICR0aGlzLmFkZENsYXNzKCdwb3B1cF9fYXV0aC10YWJzLWl0ZW0tLWN1cnJlbnQnKTtcbiAgXG4gICQoJy5wb3B1cF9fYXV0aC1jb250ZW50LS1jdXJyZW50JykucmVtb3ZlQ2xhc3MoJ3BvcHVwX19hdXRoLWNvbnRlbnQtLWN1cnJlbnQnKTtcbiAgJChgLnBvcHVwX19hdXRoLWNvbnRlbnRbZGF0YS10YWI9XCIke3RhcmdldH1cIl1gKS5hZGRDbGFzcygncG9wdXBfX2F1dGgtY29udGVudC0tY3VycmVudCcpO1xufSk7XG5cbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgZSA9PiB7XG4gIC8vIGhpZGUgZHJvcGRvd24gb24gb3V0ZXIgY2xpY2tcbiAgaWYoISQoZS50YXJnZXQpLmNsb3Nlc3QoJy5oZWFkZXItYm90dG9tX19tZW51JykubGVuZ3RoICYmICEkKGUudGFyZ2V0KS5oYXNDbGFzcygnaGVhZGVyLWJvdHRvbV9fbmF2LWxpbmsnKSkge1xuICAgICQoJy5oZWFkZXItYm90dG9tX19tZW51Jykuc2xpZGVVcCgzMDApO1xuICB9XG59KTtcblxuJCgnLmpzLWhlYWRlci1zbGlkZXInKS5zbGljayh7XG4gIGF1dG9wbGF5OiB0cnVlLFxuICBhdXRvcGxheVNwZWVkOiA3MDAwLFxuICBwcmV2QXJyb3c6ICc8ZGl2IGNsYXNzPVwiaGVhZGVyLXRvcF9fc2xpZGVyLWFycm93IGhlYWRlci10b3BfX3NsaWRlci1hcnJvdy0tcHJldlwiPuKGkjwvZGl2PicsXG4gIG5leHRBcnJvdzogJzxkaXYgY2xhc3M9XCJoZWFkZXItdG9wX19zbGlkZXItYXJyb3cgaGVhZGVyLXRvcF9fc2xpZGVyLWFycm93LS1uZXh0XCI+4oaSPC9kaXY+J1xufSk7XG5cbiQoJy5oZWFkZXItYm90dG9tX19uYXYtbGluaycpLm9uKCdjbGljaycsIGUgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICQoJy5oZWFkZXItYm90dG9tX19tZW51JykuaGlkZSgwKTtcblxuICBjb25zdCAkbWVudSA9ICQoYC5oZWFkZXItYm90dG9tX19tZW51W2RhdGEtbWVudT1cIiR7JChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtbWVudScpfVwiXWApO1xuXG4gIGlmICgkbWVudS5pcygnOnZpc2libGUnKSkge1xuICAgICRtZW51LnNsaWRlVXAoMzAwKTtcbiAgfSBlbHNlIHtcbiAgICAkbWVudS5jc3MoJ2Rpc3BsYXknLCAnZmxleCcpLmhpZGUoMCkuc2xpZGVEb3duKDMwMCk7XG4gIH1cbn0pO1xuXG4kKCcuaGVhZGVyLW1pZGRsZV9faW5mby1hY3Rpb25bZGF0YS1pY29uPVwiYnVyZ2VyXCJdJykub24oJ2NsaWNrJywgZSA9PiB7XG4gICQoZS5jdXJyZW50VGFyZ2V0KS50b2dnbGVDbGFzcygnaGVhZGVyLW1pZGRsZV9faW5mby1hY3Rpb24tLWFjdGl2ZScpO1xuICBcbiAgJCgnLmhlYWRlcicpLnRvZ2dsZUNsYXNzKCdoZWFkZXItLWFjdGl2ZScpO1xuICAkKCcuaGVhZGVyX19tZW51Jykuc2xpZGVUb2dnbGUoNTAwKTtcbn0pO1xuXG4kKCcuaGVhZGVyX19tZW51LW1hcC1oZWFkaW5nJykub24oJ2NsaWNrJywgZSA9PiB7XG4gIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICBjb25zdCAkbWFwID0gJHRoaXMucGFyZW50KCk7XG4gIFxuICBpZiAoJG1hcC5oYXNDbGFzcygnaGVhZGVyX19tZW51LW1hcC0tYWN0aXZlJykpIHtcbiAgICAkdGhpcy5wYXJlbnQoKS5maW5kKCcuaGVhZGVyX19tZW51LW1hcC1saW5rJykuc2xpZGVUb2dnbGUoMzAwKTtcbiAgfSBlbHNlIHtcbiAgICAkKCcuaGVhZGVyX19tZW51LW1hcCcpLnJlbW92ZUNsYXNzKCdoZWFkZXJfX21lbnUtbWFwLS1hY3RpdmUnKTtcbiAgICAkKCcuaGVhZGVyX19tZW51LW1hcC1saW5rJykuc2xpZGVVcCgzMDApO1xuICAgICR0aGlzLnBhcmVudCgpLmZpbmQoJy5oZWFkZXJfX21lbnUtbWFwLWxpbmsnKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKS5oaWRlKDApLnNsaWRlVG9nZ2xlKDMwMCk7XG4gIH1cbiAgJG1hcC50b2dnbGVDbGFzcygnaGVhZGVyX19tZW51LW1hcC0tYWN0aXZlJyk7XG59KTtcbiAgaWYgKCQod2luZG93KS5pbm5lcldpZHRoKCkgPCAxMjAwKSB7XG4gIGNvbnN0ICRncmlkID0gJCgnLmVuY3ljbG9wZWRpYS10YWJzX19ncmlkJyk7XG4gIGNvbnN0IGN1cnJlbnQgPSAkZ3JpZC5hdHRyKCdkYXRhLWN1cnJlbnQnKTtcbiAgY29uc3Qgb2Zmc2V0ID0gJCgnLmVuY3ljbG9wZWRpYS10YWJzX19pdGVtJykud2lkdGgoKSAqIGN1cnJlbnQ7XG5cbiAgaWYgKGN1cnJlbnQgIT09IDApIHtcbiAgICAkZ3JpZC5zY3JvbGxMZWZ0KG9mZnNldCArIDMwKTtcbiAgfVxufVxuICAkKCcuanMtaGVscGZ1bC1zZXJ2aWNlcy1zbGlkZXInKS5zbGljayh7XG4gIHNsaWRlc1RvU2hvdzogNCxcbiAgcHJldkFycm93OiAnPGRpdiBjbGFzcz1cInNsaWRlcl9fYXJyb3cgc2xpZGVyX19hcnJvdy0tcHJldlwiPjwvZGl2PicsXG4gIG5leHRBcnJvdzogJzxkaXYgY2xhc3M9XCJzbGlkZXJfX2Fycm93IHNsaWRlcl9fYXJyb3ctLW5leHRcIj48L2Rpdj4nLFxuICByZXNwb25zaXZlOiBbe1xuICAgIGJyZWFrcG9pbnQ6IDExOTksXG4gICAgc2V0dGluZ3M6ICd1bnNsaWNrJ1xuICB9XVxufSk7XG5cbiQoJy5qcy1oZWxwZnVsLWFydGljbGVzLXNsaWRlcicpLnNsaWNrKHtcbiAgc2xpZGVzVG9TaG93OiAzLFxuICBwcmV2QXJyb3c6ICc8ZGl2IGNsYXNzPVwic2xpZGVyX19hcnJvdyBzbGlkZXJfX2Fycm93LS1wcmV2XCI+PC9kaXY+JyxcbiAgbmV4dEFycm93OiAnPGRpdiBjbGFzcz1cInNsaWRlcl9fYXJyb3cgc2xpZGVyX19hcnJvdy0tbmV4dFwiPjwvZGl2PicsXG4gIHJlc3BvbnNpdmU6IFt7XG4gICAgYnJlYWtwb2ludDogMTE5OSxcbiAgICBzZXR0aW5nczoge1xuICAgICAgYXJyb3dzOiBmYWxzZSxcbiAgICAgIGluZmluaXRlOiBmYWxzZSxcbiAgICAgIHNsaWRlc1RvU2hvdzogMVxuICAgIH1cbiAgfV1cbn0pO1xuICAkKCcuanMtcmV2aWV3cy1zbGlkZXInKS5zbGljayh7XG4gIHNsaWRlc1RvU2hvdzogMyxcbiAgcHJldkFycm93OiAnPGRpdiBjbGFzcz1cInJldmlld3NfX3NsaWRlci1hcnJvdyBzbGlkZXJfX2Fycm93IHNsaWRlcl9fYXJyb3ctLXByZXZcIj48L2Rpdj4nLFxuICBuZXh0QXJyb3c6ICc8ZGl2IGNsYXNzPVwicmV2aWV3c19fc2xpZGVyLWFycm93IHNsaWRlcl9fYXJyb3cgc2xpZGVyX19hcnJvdy0tbmV4dFwiPjwvZGl2PicsXG4gIHJlc3BvbnNpdmU6IFt7XG4gICAgYnJlYWtwb2ludDogMTE5OSxcbiAgICBzZXR0aW5nczoge1xuICAgICAgYXJyb3dzOiBmYWxzZSxcbiAgICAgIGluZmluaXRlOiBmYWxzZSxcbiAgICAgIHNsaWRlc1RvU2hvdzogMVxuICAgIH1cbiAgfV1cbn0pO1xuXG4kKCcuanMtcGFydG5lcnMtc2xpZGVyJykuc2xpY2soe1xuICBzbGlkZXNUb1Nob3c6IDYsXG4gIHN3aXBlVG9TbGlkZTogdHJ1ZSxcbiAgcHJldkFycm93OiAnPGRpdiBjbGFzcz1cInJldmlld3NfX3BhcnRuZXJzLWFycm93IHNsaWRlcl9fYXJyb3cgc2xpZGVyX19hcnJvdy0tcHJldlwiPjwvZGl2PicsXG4gIG5leHRBcnJvdzogJzxkaXYgY2xhc3M9XCJyZXZpZXdzX19wYXJ0bmVycy1hcnJvdyBzbGlkZXJfX2Fycm93IHNsaWRlcl9fYXJyb3ctLW5leHRcIj48L2Rpdj4nLFxuICBwYXVzZU9uSG92ZXI6IGZhbHNlLFxuICBhdXRvcGxheTogdHJ1ZSxcbiAgYXV0b3BsYXlTcGVlZDogMCxcbiAgY3NzRWFzZTonbGluZWFyJyxcbiAgc3BlZWQ6IDEwMDAwLFxuICByZXNwb25zaXZlOiBbe1xuICAgIGJyZWFrcG9pbnQ6IDExOTksXG4gICAgc2V0dGluZ3M6IHtcbiAgICAgIHNsaWRlc1RvU2hvdzogM1xuICAgIH1cbiAgfV1cbn0pO1xuICAkKCcuanMtZGlmZmljdWx0aWVzJykub24oJ2FmdGVyQ2hhbmdlIGluaXQnLCAoZSwgaSkgPT4ge1xuICAkKCcuZGlmZmljdWx0aWVzX19zbGlkZXItYXJyb3cuc2xpZGVyX19hcnJvdy0tcHJldiBwJykudGV4dCgkKGkuJHNsaWRlc1tpLmN1cnJlbnRTbGlkZV0pLmZpbmQoJy5kaWZmaWN1bHRpZXNfX3NsaWRlJykuYXR0cignZGF0YS1wcmV2JykpO1xuICAkKCcuZGlmZmljdWx0aWVzX19zbGlkZXItYXJyb3cuc2xpZGVyX19hcnJvdy0tbmV4dCBwJykudGV4dCgkKGkuJHNsaWRlc1tpLmN1cnJlbnRTbGlkZV0pLmZpbmQoJy5kaWZmaWN1bHRpZXNfX3NsaWRlJykuYXR0cignZGF0YS1uZXh0JykpO1xuICBpZiAoaS5jdXJyZW50U2xpZGUgPT09IDApIHtcbiAgICAkKCcuZGlmZmljdWx0aWVzX19zbGlkZXItYXJyb3cuc2xpZGVyX19hcnJvdy0tcHJldicpLmhpZGUoKTtcbiAgfSBlbHNlIGlmIChpLmN1cnJlbnRTbGlkZSA9PSBpLiRzbGlkZXMubGVuZ3RoIC0gMSkge1xuICAgICQoJy5kaWZmaWN1bHRpZXNfX3NsaWRlci1hcnJvdy5zbGlkZXJfX2Fycm93LS1uZXh0JykuaGlkZSgpO1xuICB9IGVsc2Uge1xuICAgICQoJy5kaWZmaWN1bHRpZXNfX3NsaWRlci1hcnJvdy5zbGlkZXJfX2Fycm93LS1wcmV2Jykuc2hvdygpO1xuICAgICQoJy5kaWZmaWN1bHRpZXNfX3NsaWRlci1hcnJvdy5zbGlkZXJfX2Fycm93LS1uZXh0Jykuc2hvdygpO1xuICB9XG59KTtcblxuJCgnLmpzLWRpZmZpY3VsdGllcycpLnNsaWNrKHtcbiAgaW5maW5pdGU6IGZhbHNlLFxuICBwcmV2QXJyb3c6ICc8ZGl2IGNsYXNzPVwiZGlmZmljdWx0aWVzX19zbGlkZXItYXJyb3cgc2xpZGVyX19hcnJvdyBzbGlkZXJfX2Fycm93LS1wcmV2XCI+PHA+PC9wPjwvZGl2PicsXG4gIG5leHRBcnJvdzogJzxkaXYgY2xhc3M9XCJkaWZmaWN1bHRpZXNfX3NsaWRlci1hcnJvdyBzbGlkZXJfX2Fycm93IHNsaWRlcl9fYXJyb3ctLW5leHRcIj48cD48L3A+PC9kaXY+JyxcbiAgcmVzcG9uc2l2ZTogW3tcbiAgICBicmVha3BvaW50OiAxMTk5LFxuICAgIHNldHRpbmdzOiAndW5zbGljaydcbiAgfV1cbn0pO1xuXG5pZiAoJCh3aW5kb3cpLmlubmVyV2lkdGgoKSA8IDEyMDApIHtcbiAgJCgnLmRpZmZpY3VsdGllc19fc2xpZGVyJykub24oJ3Njcm9sbCcsIGUgPT4ge1xuICAgIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuXG4gICAgJHRoaXMuYWRkQ2xhc3MoJ2RpZmZpY3VsdGllcy0tc2Nyb2xsZWQnKTtcbiAgICAkdGhpcy5maW5kKCcuZGlmZmljdWx0aWVzX19kcmFnJykuZmFkZU91dCgxNTApO1xuICB9KTtcbn1cbiAgaWYgKCQod2luZG93KS5pbm5lcldpZHRoKCkgPCAxMjAwKSB7XG4gICQoJy5mb290ZXJfX21hcC1oZWFkaW5nJykub24oJ2NsaWNrJywgZSA9PiB7XG4gICAgY29uc3QgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCk7XG5cbiAgICBpZiAoJHRoaXMuaGFzQ2xhc3MoJ2Zvb3Rlcl9fbWFwLWhlYWRpbmctLWFjdGl2ZScpKSB7XG4gICAgICAkdGhpcy5wYXJlbnQoKS5maW5kKCcuZm9vdGVyX19tYXAtbGluaycpLnNsaWRlVG9nZ2xlKDMwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICR0aGlzLnBhcmVudCgpLmZpbmQoJy5mb290ZXJfX21hcC1saW5rJykuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJykuaGlkZSgwKS5zbGlkZVRvZ2dsZSgzMDApO1xuICAgIH1cbiAgICAkdGhpcy50b2dnbGVDbGFzcygnZm9vdGVyX19tYXAtaGVhZGluZy0tYWN0aXZlJyk7XG4gIH0pO1xufVxuICAkKCcuanMtc3BlY2lhbGlzdHMtc2xpZGVyJykuc2xpY2soe1xuICBzbGlkZXNUb1Nob3c6IDMsXG4gIHByZXZBcnJvdzogJzxkaXYgY2xhc3M9XCJzbGlkZXJfX2Fycm93IHNsaWRlcl9fYXJyb3ctLXByZXZcIj48L2Rpdj4nLFxuICBuZXh0QXJyb3c6ICc8ZGl2IGNsYXNzPVwic2xpZGVyX19hcnJvdyBzbGlkZXJfX2Fycm93LS1uZXh0XCI+PC9kaXY+JyxcbiAgcmVzcG9uc2l2ZTogW3tcbiAgICBicmVha3BvaW50OiAxMTk5LFxuICAgIHNldHRpbmdzOiB7XG4gICAgICBhcnJvd3M6IGZhbHNlLFxuICAgICAgaW5maW5pdGU6IGZhbHNlLFxuICAgICAgc2xpZGVzVG9TaG93OiAxXG4gICAgfVxuICB9XVxufSk7XG4gICQoJy5jb25zdWx0cy1zdGVwc19fY2FyZC1hY2NvcmRlb24nKS5vbignY2xpY2snLCBlID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICBjb25zdCAkY29udGVudCA9ICR0aGlzLnNpYmxpbmdzKCcuY29uc3VsdHMtc3RlcHNfX2NhcmQtY29udGVudCcpO1xuXG4gIGlmICgkY29udGVudC5pcygnOnZpc2libGUnKSkge1xuICAgICR0aGlzLnRleHQoJHRoaXMuYXR0cignZGF0YS1zaG93JykpO1xuICB9IGVsc2Uge1xuICAgICR0aGlzLnRleHQoJHRoaXMuYXR0cignZGF0YS1oaWRlJykpO1xuICB9XG5cbiAgJGNvbnRlbnQuc2xpZGVUb2dnbGUoMzAwKTtcbn0pO1xuICAkKCcuY29uc3VsdHMtdHlwZXNfX2NhcmQtaW5mby1tb3JlJykub24oJ2NsaWNrJywgZSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcblxuICBjb25zdCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgY29uc3QgJGNvbnRlbnQgPSAkdGhpcy5jbG9zZXN0KCcuY29uc3VsdHMtdHlwZXNfX2NhcmQnKS5maW5kKCcuY29uc3VsdHMtdHlwZXNfX2NhcmQtaW5uZXInKTtcblxuICBpZiAoJGNvbnRlbnQuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAkdGhpcy50ZXh0KCR0aGlzLmF0dHIoJ2RhdGEtc2hvdycpKTtcbiAgfSBlbHNlIHtcbiAgICAkdGhpcy50ZXh0KCR0aGlzLmF0dHIoJ2RhdGEtaGlkZScpKTtcbiAgfVxuXG4gICR0aGlzLnRvZ2dsZUNsYXNzKCdjb25zdWx0cy10eXBlc19fY2FyZC1pbmZvLW1vcmUtLWFjdGl2ZScpO1xuXG4gICRjb250ZW50LnNsaWRlVG9nZ2xlKDMwMCk7XG59KTtcbiAgJCgnLmVuY3ljbG9wZWRpYS10b2dnbGVzX19pdGVtJykub24oJ2NsaWNrJywgZSA9PiB7XG4gICQoJy5lbmN5Y2xvcGVkaWEtdG9nZ2xlc19faXRlbS0tYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2VuY3ljbG9wZWRpYS10b2dnbGVzX19pdGVtLS1hY3RpdmUnKTtcbiAgJChlLmN1cnJlbnRUYXJnZXQpLmFkZENsYXNzKCdlbmN5Y2xvcGVkaWEtdG9nZ2xlc19faXRlbS0tYWN0aXZlJyk7XG59KTtcbiAgJCgnLmVuY3ljbG9wZWRpYS1maWx0ZXJfX2hlYWQnKS5vbignY2xpY2snLCBlID0+IHtcbiAgJChlLmN1cnJlbnRUYXJnZXQpLnRvZ2dsZUNsYXNzKCdlbmN5Y2xvcGVkaWEtZmlsdGVyX19oZWFkLS1hY3RpdmUnKTtcbiAgJCgnLmVuY3ljbG9wZWRpYS1maWx0ZXJfX2lubmVyJykuc2xpZGVUb2dnbGUoMzAwKTtcbn0pO1xuXG4kKCcuZW5jeWNsb3BlZGlhLWZpbHRlcl9faXRlbScpLm9uKCdjbGljaycsIGUgPT4ge1xuICAkKGUuY3VycmVudFRhcmdldCkudG9nZ2xlQ2xhc3MoJ2VuY3ljbG9wZWRpYS1maWx0ZXJfX2l0ZW0tLWFjdGl2ZScpO1xuICAkKCcuZW5jeWNsb3BlZGlhLWZpbHRlcl9faGVhZC10aGVtZXMtY291bnQnKS50ZXh0KCQoJy5lbmN5Y2xvcGVkaWEtZmlsdGVyX19pdGVtLS1hY3RpdmUnKS5sZW5ndGgpO1xufSk7XG5cbiQoJy5lbmN5Y2xvcGVkaWEtZmlsdGVyX19idG4nKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICQoJy5lbmN5Y2xvcGVkaWEtZmlsdGVyX19oZWFkJykudG9nZ2xlQ2xhc3MoJ2VuY3ljbG9wZWRpYS1maWx0ZXJfX2hlYWQtLWFjdGl2ZScpO1xuICAkKCcuZW5jeWNsb3BlZGlhLWZpbHRlcl9faW5uZXInKS5zbGlkZVRvZ2dsZSgzMDApO1xufSk7XG4gICQoJy5lbmN5Y2xvcGVkaWEtYXJ0aWNsZV9faW1hZ2UtbGlrZScpLm9uKCdjbGljaycsIGUgPT4ge1xuICAkKGUuY3VycmVudFRhcmdldCkudG9nZ2xlQ2xhc3MoJ2VuY3ljbG9wZWRpYS1hcnRpY2xlX19pbWFnZS1saWtlLS1hY3RpdmUnKTtcbn0pO1xuICAkKCcuY2FsZW5kYXJfX3RhYmxlLXBvcHVwLWNsb3NlJykub24oJ2NsaWNrJywgZSA9PiB7XG4gICQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnQoKS5oaWRlKDApO1xufSk7XG5cbiQoJy5jYWxlbmRhcl9fdGFibGUtY2VsbFtkYXRhLXdlZWs9XCJoYXJkXCJdJykub24oJ2NsaWNrJywgZSA9PiB7XG4gIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICBjb25zdCB0YXJnZXQgPSAkdGhpcy5hdHRyKCdkYXRhLXBvcHVwJyk7XG5cbiAgJCgnLmNhbGVuZGFyX190YWJsZS1wb3B1cCcpLmhpZGUoMCk7XG4gIGlmICgkKHdpbmRvdykuaW5uZXJXaWR0aCgpID4gMTE5OSkge1xuICAgICQoYC5jYWxlbmRhcl9fdGFibGUtcG9wdXBbZGF0YS1wb3B1cD1cIiR7dGFyZ2V0fVwiXWApLmZhZGVJbigzMDApO1xuICB9IGVsc2Uge1xuICAgICQoYC5jYWxlbmRhcl9fdGFibGUtcG9wdXBbZGF0YS1wb3B1cD1cIiR7dGFyZ2V0fVwiXWApLmNzcygndG9wJywgJHRoaXMucG9zaXRpb24oKS50b3AgLSAxNSArICdweCcpLmZhZGVJbigzMDApO1xuICB9XG59KTtcbiAgJCgnLmpzLXJhbmdlJykuZWFjaCgoaSwgZWwpID0+IHtcbiAgY29uc3QgJHRoaXMgPSAkKGVsKTtcblxuICAkdGhpcy5pb25SYW5nZVNsaWRlcih7XG4gICAgdHlwZTogJ3NpbmdsZScsXG4gICAgbWF4OiAkdGhpcy5hdHRyKCdkYXRhLW1heCcpLFxuICAgIG1pbjogJHRoaXMuYXR0cignZGF0YS1taW4nKSxcbiAgICBmcm9tOiAkdGhpcy5hdHRyKCd2YWx1ZScpLFxuICAgIHZhbHVlczogSlNPTi5wYXJzZSgkdGhpcy5hdHRyKCdkYXRhLXZhbHVlJykpLFxuICAgIGdyaWQ6IHRydWUsXG4gICAgZ3JpZF9udW06IDEsXG4gICAgc3RlcDogMSxcbiAgICBvbkZpbmlzaDogZGF0YSA9PiB7XG4gICAgICAkKCcubW9udGgtYWdlX19yZXN1bHQtY29udGVudCcpLmhpZGUoMClcbiAgICAgICQoYC5tb250aC1hZ2VfX3Jlc3VsdC1jb250ZW50W2RhdGEtY29udGVudD1cIiR7ZGF0YS5mcm9tfVwiXWApLmZhZGVJbigzMDApXG4gICAgICBpZiAoZGF0YS5mcm9tID09ICR0aGlzLmF0dHIoJ2RhdGEtbWluJykpIHtcbiAgICAgICAgJCgnLm1vbnRoLWFnZV9fc2VsZWN0ZWQnKS50ZXh0KChkYXRhLmZyb21fdmFsdWUgKyAnINC80LXRgdGP0YbQtdCyJykucmVwbGFjZSgnPGJyPicsICcgJykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJCgnLm1vbnRoLWFnZV9fc2VsZWN0ZWQnKS50ZXh0KGRhdGEuZnJvbV92YWx1ZS5yZXBsYWNlKCc8YnI+JywgJyAnKSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn0pO1xuICAkKCcucHJvZmlsZV9fY2hpbGRyZW4tYWRkJykub24oJ2NsaWNrJywgZSA9PiB7XG4gIGNvbnN0ICRyb3cgPSAkKGA8ZGl2IGNsYXNzPVwicHJvZmlsZV9fY2hpbGRyZW4tcm93XCI+XG4gICAgPGlucHV0IGNsYXNzPVwiaW5wdXQgcHJvZmlsZV9fY2hpbGRyZW4taW5wdXRcIiB0eXBlPVwidGV4dFwiIG5hbWU9XCJjaGlsZHJlbkJpcnRoZGF0ZVwiIHBsYWNlaG9sZGVyPVwi0JTQsNGC0LAg0YDQvtC20LTQtdC90LjRjyDRgNC10LHQtdC90LrQsFwiLz48YSBjbGFzcz1cImJ1dHRvbiBidXR0b24tLXF1b3Rlcm5hcnkgcHJvZmlsZV9fY2hpbGRyZW4tYnRuXCIgaHJlZj1cIiNcIj7QodC+0L0g0YDQtdCx0LXQvdC60LAgMC0zINC80LXRgdGP0YbQsDwvYT5cbiAgPC9kaXY+YCk7XG5cbiAgJHJvdy5pbnNlcnRCZWZvcmUoJChlLmN1cnJlbnRUYXJnZXQpKTtcbn0pO1xuXG4kKCcucHJvZmlsZV9fYXNpZGUtbGluaycpLm9uKCdjbGljaycsIGUgPT4ge1xuICBjb25zdCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgY29uc3QgdGFyZ2V0ID0gJHRoaXMuYXR0cignZGF0YS10YWInKTtcblxuICBpZiAoJCh3aW5kb3cpLmlubmVyV2lkdGgoKSA8IDEyMDApIHtcbiAgICQoJy5wcm9maWxlX19hc2lkZScpLmhpZGUoMCk7IFxuICAgJCgnLnByb2ZpbGVfX21haW4nKS5mYWRlSW4oMzAwKTtcblxuICAgJCgnLnByb2ZpbGVfX2hlYWRpbmctdGl0bGUnKS5hZGRDbGFzcygncHJvZmlsZV9faGVhZGluZy10aXRsZS0tYmFjaycpO1xuICB9XG5cbiAgJCgnLnByb2ZpbGVfX2FzaWRlLWxpbmstLWFjdGl2ZScpLnJlbW92ZUNsYXNzKCdwcm9maWxlX19hc2lkZS1saW5rLS1hY3RpdmUnKTtcbiAgJHRoaXMuYWRkQ2xhc3MoJ3Byb2ZpbGVfX2FzaWRlLWxpbmstLWFjdGl2ZScpO1xuICAkKCcucHJvZmlsZV9fY29udGVudCcpLmhpZGUoMCk7XG4gICQoYC5wcm9maWxlX19jb250ZW50W2RhdGEtY29udGVudD1cIiR7dGFyZ2V0fVwiXWApLmZhZGVJbigzMDApO1xufSk7XG5cbiQoJy5wcm9maWxlX19oZWFkaW5nLXRpdGxlJykub24oJ2NsaWNrJywgZSA9PiB7XG4gIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuXG4gIGlmICgkKHdpbmRvdykuaW5uZXJXaWR0aCgpIDwgMTIwMCkge1xuICAgICR0aGlzLnJlbW92ZUNsYXNzKCdwcm9maWxlX19oZWFkaW5nLXRpdGxlLS1iYWNrJyk7XG5cbiAgICAkKCcucHJvZmlsZV9fbWFpbicpLmhpZGUoMCk7XG4gICAgJCgnLnByb2ZpbGVfX2FzaWRlJykuZmFkZUluKDMwMCk7XG4gIH1cbn0pO1xuXG4kKCcuanMtcHJvZmlsZS1jb25zdWx0Jykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAkKCcucHJvZmlsZV9fY29uc3VsdC1tYWluJykuaGlkZSgwKTtcbiAgJCgnLnByb2ZpbGVfX2NvbnN1bHQtbWFpbi0tZm9ybScpLmZhZGVJbigzMDApO1xufSk7XG4gICQoJy5jb25zdWx0YW50X190YWJzLWl0ZW0nKS5vbignY2xpY2snLCBlID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgY29uc3QgdGFyZ2V0ID0gJHRoaXMuYXR0cignZGF0YS1jb250ZW50Jyk7XG5cbiAgJCgnLmNvbnN1bHRhbnRfX3RhYnMtaXRlbS0tYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2NvbnN1bHRhbnRfX3RhYnMtaXRlbS0tYWN0aXZlJyk7XG4gICR0aGlzLmFkZENsYXNzKCdjb25zdWx0YW50X190YWJzLWl0ZW0tLWFjdGl2ZScpO1xuXG4gICQoJy5jb25zdWx0YW50X19jb250ZW50JykuaGlkZSgwKTtcbiAgJChgLmNvbnN1bHRhbnRfX2NvbnRlbnRbZGF0YS1jb250ZW50PVwiJHt0YXJnZXR9XCJdYCkuZmFkZUluKDMwMCk7XG59KTtcblxuJCgnLmpzLWNvbnN1bHRhbnQtY2VydGlmaWNhdGVzJykuc2xpY2soe1xuICBzbGlkZXNUb1Nob3c6IDQsXG4gIGluZmluaXRlOiBmYWxzZSxcbiAgcHJldkFycm93OiAnPGRpdiBjbGFzcz1cImNvbnN1bHRhbnRfX2NlcnRpZmljYXRlcy1hcnJvdyBzbGlkZXJfX2Fycm93IHNsaWRlcl9fYXJyb3ctLXByZXZcIj48L2Rpdj4nLFxuICBuZXh0QXJyb3c6ICc8ZGl2IGNsYXNzPVwiY29uc3VsdGFudF9fY2VydGlmaWNhdGVzLWFycm93IHNsaWRlcl9fYXJyb3cgc2xpZGVyX19hcnJvdy0tbmV4dFwiPjwvZGl2PicsXG4gIHJlc3BvbnNpdmU6IFt7XG4gICAgYnJlYWtwb2ludDogMTE5OSxcbiAgICBzZXR0aW5nczoge1xuICAgICAgYXJyb3dzOiBmYWxzZSxcbiAgICAgIHNsaWRlc1RvU2hvdzogMlxuICAgIH1cbiAgfV1cbn0pO1xuXG5jb25zdCAkY29uc3VsdGFudFNsaWRlciA9ICQoJy5qcy1jb25zdWx0YW50LXNsaWRlcicpO1xuJGNvbnN1bHRhbnRTbGlkZXIub24oJ2luaXQgcmVJbml0IGFmdGVyQ2hhbmdlJywgKGV2ZW50LCBzbGljaywgY3VycmVudFNsaWRlKSA9PiB7XG4gIGNvbnN0IGkgPSAoY3VycmVudFNsaWRlID8gY3VycmVudFNsaWRlIDogMCkgKyAxO1xuICAkKCcuY29uc3VsdGFudF9fc2xpZGVyLWNvdW50ZXInKS50ZXh0KGkgKyAnIC8gJyArIHNsaWNrLnNsaWRlQ291bnQpO1xufSk7XG4kY29uc3VsdGFudFNsaWRlci5zbGljayh7XG4gIGluZmluaXRlOiBmYWxzZSxcbiAgbG9vcDogdHJ1ZSxcbiAgcHJldkFycm93OiAnPGRpdiBjbGFzcz1cImNvbnN1bHRhbnRfX3NsaWRlci1hcnJvdyBzbGlkZXJfX2Fycm93IHNsaWRlcl9fYXJyb3ctLXByZXZcIj48L2Rpdj4nLFxuICBuZXh0QXJyb3c6ICc8ZGl2IGNsYXNzPVwiY29uc3VsdGFudF9fc2xpZGVyLWFycm93IHNsaWRlcl9fYXJyb3cgc2xpZGVyX19hcnJvdy0tbmV4dFwiPjwvZGl2Pidcbn0pO1xuICAkKCcucHJlc3NfX3RhYnMtaXRlbScpLm9uKCdjbGljaycsIGUgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICBjb25zdCB0YXJnZXQgPSAkdGhpcy5hdHRyKCdkYXRhLWNvbnRlbnQnKTtcblxuICAkKCcucHJlc3NfX3RhYnMtaXRlbS0tYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ3ByZXNzX190YWJzLWl0ZW0tLWFjdGl2ZScpO1xuICAkdGhpcy5hZGRDbGFzcygncHJlc3NfX3RhYnMtaXRlbS0tYWN0aXZlJyk7XG5cbiAgJCgnLnByZXNzX19jb250ZW50JykuaGlkZSgwKTtcbiAgJChgLnByZXNzX19jb250ZW50W2RhdGEtY29udGVudD1cIiR7dGFyZ2V0fVwiXWApLmZhZGVJbigzMDApO1xufSk7XG5cbiAgaWYgKCQod2luZG93KS5pbm5lcldpZHRoKCkgPiAxMTk5KSB7XG5cbiAgICAkKCcuanMtY2hpbGQtbW9yZScpLm9uKCdjbGljaycsIGUgPT4ge1xuICAgICAgJCgkKGUuY3VycmVudFRhcmdldCkucGFyZW50KCkuZmluZCgnLmpzLWZvcm0tcm93IGlucHV0W25hbWU9XCJkYXRlXCJdJylbMF0pLmNsb25lKCkuaW5zZXJ0QmVmb3JlKCQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnQoKS5maW5kKCdidXR0b24nKSkudmFsKCcnKTtcbiAgICB9KTtcbiAgfSB7XG4gICAgJCgnLmpzLWNoaWxkLW1vcmUnKS5vbignY2xpY2snLCBlID0+IHtcbiAgICAgICQoJChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudCgpLmZpbmQoJ2lucHV0W25hbWU9XCJkYXRlXCJdJylbMF0pLmNsb25lKCkuaW5zZXJ0QmVmb3JlKCQoZS5jdXJyZW50VGFyZ2V0KSkudmFsKCcnKTtcbiAgICB9KTtcbiAgfVxufSJdfQ==
